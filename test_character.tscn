[gd_scene load_steps=24 format=3 uid="uid://y2763ntb71tf"]

[ext_resource type="Script" path="res://Character.gd" id="1_aywxf"]
[ext_resource type="PackedScene" uid="uid://bmhp7gx70w6va" path="res://exhaustion_effect.tscn" id="2_iu6pc"]
[ext_resource type="Script" path="res://Hitbox.gd" id="6_dvorw"]
[ext_resource type="Script" path="res://NodeEffectMaterial.gd" id="7_lim1o"]
[ext_resource type="Script" path="res://Stat.gd" id="7_xe5s5"]
[ext_resource type="Script" path="res://SlotToolUser.gd" id="8_gt7dl"]
[ext_resource type="Resource" uid="uid://784u5sak8kjf" path="res://flesh_effect_material.tres" id="8_yacv2"]
[ext_resource type="Script" path="res://SupplyArea.gd" id="9_phpst"]
[ext_resource type="Script" path="res://Inventory.gd" id="10_emt75"]
[ext_resource type="Script" path="res://Interactor.gd" id="11_t6hvw"]
[ext_resource type="Texture2D" uid="uid://qgix8spprtde" path="res://Resources/footprints.png" id="12_b0lh4"]
[ext_resource type="Script" path="res://Tracker.gd" id="12_j113j"]
[ext_resource type="Script" path="res://TrackSettings.gd" id="13_8sisl"]
[ext_resource type="Script" path="res://Trailer.gd" id="14_n4qha"]
[ext_resource type="Texture2D" uid="uid://dpqah26mvoxsk" path="res://Resources/Character/24-person-test-madmax.png" id="15_ibf7h"]
[ext_resource type="Script" path="res://CharacterStatManager.gd" id="16_w8ojt"]
[ext_resource type="Script" path="res://EntityAttributeHandler.gd" id="17_pn34l"]
[ext_resource type="Resource" uid="uid://716w77prpogm" path="res://test_attribute_package.tres" id="18_bb2ni"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_4a5ra"]
radius = 0.25

[sub_resource type="CylinderShape3D" id="CylinderShape3D_gsofm"]
radius = 0.25

[sub_resource type="CylinderShape3D" id="CylinderShape3D_fk3f4"]
radius = 0.25

[sub_resource type="Resource" id="Resource_3l03p"]
script = ExtResource("13_8sisl")
track = true
width = 0.35
color = Color(0, 0, 0, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_tmjnt"]
top_radius = 0.2
bottom_radius = 0.2

[node name="Character" type="CharacterBody3D"]
collision_layer = 2
collision_mask = 131
script = ExtResource("1_aywxf")
character_body_layer = 2
exhaustion_effect_scene = ExtResource("2_iu6pc")

[node name="EntityAttributeHandler" type="Node" parent="."]
script = ExtResource("17_pn34l")
attributes = ExtResource("18_bb2ni")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CylinderShape3D_4a5ra")

[node name="FleshMaterial" type="Node" parent="CollisionShape3D"]
script = ExtResource("7_lim1o")
material = ExtResource("8_yacv2")

[node name="Hitbox" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
collision_layer = 4
collision_mask = 0
script = ExtResource("6_dvorw")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Hitbox"]
shape = SubResource("CylinderShape3D_gsofm")

[node name="FleshMaterial" type="Node" parent="Hitbox/CollisionShape3D"]
script = ExtResource("7_lim1o")
material = ExtResource("8_yacv2")

[node name="Health" type="Node" parent="."]
script = ExtResource("7_xe5s5")
allow_negative = true

[node name="Energy" type="Node" parent="."]
script = ExtResource("7_xe5s5")

[node name="ToolUser" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0.25)
script = ExtResource("8_gt7dl")
tool_slots = 2

[node name="EquipmentUser" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0.25)
script = ExtResource("8_gt7dl")
tool_slots = 4

[node name="SupplyArea" type="Area3D" parent="." node_paths=PackedStringArray("inventory")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
collision_layer = 0
collision_mask = 64
script = ExtResource("9_phpst")
inventory = NodePath("../Inventory")

[node name="CollisionShape3D" type="CollisionShape3D" parent="SupplyArea"]
shape = SubResource("CylinderShape3D_fk3f4")

[node name="Inventory" type="Node" parent="."]
script = ExtResource("10_emt75")

[node name="Interactor" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
target_position = Vector3(0, 0, 1)
collision_mask = 385
collide_with_areas = true
script = ExtResource("11_t6hvw")
interaction_mask = 8

[node name="Tracker" type="Node3D" parent="."]
script = ExtResource("12_j113j")
texture = ExtResource("12_b0lh4")
default_track_settings = SubResource("Resource_3l03p")

[node name="RayCast3D" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00366211, 1, -0.0032959)
target_position = Vector3(0, -3, 0)

[node name="Trailer" type="Node3D" parent="."]
script = ExtResource("14_n4qha")

[node name="Sprite3D" type="Sprite3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0, 2, 0)
pixel_size = 0.05
axis = 1
shaded = true
alpha_cut = 1
texture_filter = 0
texture = ExtResource("15_ibf7h")

[node name="CharacterStatManager" type="Node" parent="." node_paths=PackedStringArray("character")]
script = ExtResource("16_w8ojt")
character = NodePath("..")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
cast_shadow = 3
mesh = SubResource("CylinderMesh_tmjnt")

[connection signal="was_hit" from="Hitbox" to="Health" method="modify"]
